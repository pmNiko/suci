(this.webpackJsonpsuci=this.webpackJsonpsuci||[]).push([[9],{194:function(e,n,t){"use strict";t.d(n,"c",(function(){return x})),t.d(n,"a",(function(){return p})),t.d(n,"k",(function(){return v})),t.d(n,"i",(function(){return g})),t.d(n,"d",(function(){return D})),t.d(n,"l",(function(){return y})),t.d(n,"b",(function(){return $})),t.d(n,"j",(function(){return w})),t.d(n,"e",(function(){return I})),t.d(n,"f",(function(){return k})),t.d(n,"h",(function(){return C})),t.d(n,"g",(function(){return T}));var i=t(62),r=t(36),c=t.n(r);function a(){var e=Object(i.a)(["\n  # definici\xf3n de la mutaci\xf3n\n  mutation DishPreparing($order_id: ID!, $dish_id: ID!) {\n    # ejecuci\xf3n de la mutaci\xf3n\n    dishPreparing(order_id: $order_id, dish_id: $dish_id) {\n      dishes {\n        _id\n        count\n      }\n    }\n  }\n"]);return a=function(){return e},e}function d(){var e=Object(i.a)(["\n  # definici\xf3n de la mutaci\xf3n\n  mutation DishReady($order_id: ID!, $dish_id: ID!) {\n    # ejecuci\xf3n de la mutaci\xf3n\n    dishReady(order_id: $order_id, dish_id: $dish_id) {\n      _id\n      dishes {\n        _id\n        state\n      }\n    }\n  }\n"]);return d=function(){return e},e}function s(){var e=Object(i.a)(["\n  # definici\xf3n de la mutaci\xf3n\n  mutation DishDelivered($order_id: ID!, $dish_id: ID!) {\n    # ejecuci\xf3n de la mutaci\xf3n\n    dishDelivered(order_id: $order_id, dish_id: $dish_id) {\n      dishes {\n        _id\n        count\n      }\n    }\n  }\n"]);return s=function(){return e},e}function o(){var e=Object(i.a)(["\n  # definici\xf3n de la mutaci\xf3n\n  mutation DishReadyToOrder($order_id: ID!, $dishes: [ID]) {\n    # ejecuci\xf3n de la mutaci\xf3n\n    dishReadyToOrder(order_id: $order_id, dishes: $dishes) {\n      dishes {\n        _id\n      }\n    }\n  }\n"]);return o=function(){return e},e}function u(){var e=Object(i.a)(["\n  # definici\xf3n de la mutaci\xf3n\n  mutation DishPreparingToOrder($order_id: ID!, $dishes: [ID]) {\n    # ejecuci\xf3n de la mutaci\xf3n\n    dishPreparingToOrder(order_id: $order_id, dishes: $dishes) {\n      dishes {\n        _id\n      }\n    }\n  }\n"]);return u=function(){return e},e}function l(){var e=Object(i.a)(["\n  # definici\xf3n de la mutaci\xf3n\n  mutation PayOrder($order_id: ID!) {\n    # ejecuci\xf3n de la mutaci\xf3n\n    payOrder(order_id: $order_id) {\n      _id\n      paid\n    }\n  }\n"]);return l=function(){return e},e}function j(){var e=Object(i.a)(["\n  # definici\xf3n de la mutaci\xf3n\n  mutation CloseOrder($order_id: ID!) {\n    # ejecuci\xf3n de la mutaci\xf3n\n    closeOrder(order_id: $order_id) {\n      _id\n      table\n    }\n  }\n"]);return j=function(){return e},e}function h(){var e=Object(i.a)(["\n  # definici\xf3n de la mutaci\xf3n\n  mutation DeleteOrder($order_id: ID!) {\n    # ejecuci\xf3n de la mutaci\xf3n\n    deleteOrder(order_id: $order_id) {\n      _id\n      table\n    }\n  }\n"]);return h=function(){return e},e}function b(){var e=Object(i.a)(["\n  # definici\xf3n de la mutaci\xf3n\n  mutation IncrementDishToOrder($order_id: ID!, $dish_id: ID!) {\n    # ejecuci\xf3n de la mutaci\xf3n\n    decrementDishToOrder(order_id: $order_id, dish_id: $dish_id) {\n      dishes {\n        _id\n        count\n      }\n    }\n  }\n"]);return b=function(){return e},e}function O(){var e=Object(i.a)(["\n  # definici\xf3n de la mutaci\xf3n\n  mutation IncrementDishToOrder($order_id: ID!, $dish_id: ID!) {\n    # ejecuci\xf3n de la mutaci\xf3n\n    incrementDishToOrder(order_id: $order_id, dish_id: $dish_id) {\n      dishes {\n        _id\n        count\n      }\n    }\n  }\n"]);return O=function(){return e},e}function f(){var e=Object(i.a)(["\n  # definici\xf3n de la mutaci\xf3n\n  mutation PopDishToOrder($order_id: ID!, $dish_id: ID!) {\n    # ejecuci\xf3n de la mutaci\xf3n\n    popDishToOrder(order_id: $order_id, dish_id: $dish_id) {\n      dishes {\n        _id\n      }\n    }\n  }\n"]);return f=function(){return e},e}function m(){var e=Object(i.a)(["\n  # definici\xf3n de la mutaci\xf3n\n  mutation AddDishToOrder($order_id: ID!, $dish_id: ID!) {\n    # ejecuci\xf3n de la mutaci\xf3n\n    addDishToOrder(order_id: $order_id, dish_id: $dish_id) {\n      dishes {\n        _id\n        name\n        price\n        category\n        count\n        state\n      }\n    }\n  }\n"]);return m=function(){return e},e}function _(){var e=Object(i.a)(["\n  # definici\xf3n de la mutaci\xf3n\n  mutation CreateOrder($table: Int!) {\n    # ejecuci\xf3n de la mutaci\xf3n\n    createOrder(table: $table) {\n      _id\n      number\n      date\n      time\n      table\n      closed\n    }\n  }\n"]);return _=function(){return e},e}var x=c()(_()),p=c()(m()),v=c()(f()),g=c()(O()),D=c()(b()),y=c()(h()),$=c()(j()),w=c()(l()),I=c()(u()),k=(c()(o()),c()(s())),C=c()(d()),T=c()(a())},268:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return be}));var i=t(10),r=t(1),c=t(264),a=t(267),d=t(191),s=t(173),o=t(167),u=t(226),l=t.n(u),j=t(262),h=t(263),b=t(219),O=t.n(b),f=t(220),m=t.n(f),_=t(221),x=t.n(_),p=t(224),v=t.n(p),g=t(222),D=t.n(g),y=t(223),$=t.n(y),w=Object(o.a)({root:{width:"95%"}}),I=function(e){var n=e.setCategory,t=e.category,r=w();return Object(i.jsxs)(j.a,{value:t,onChange:function(e,t){n(t)},showLabels:!0,className:r.root,children:[Object(i.jsx)(h.a,{label:"Rapidas",value:"Rapidas",icon:Object(i.jsx)(O.a,{})}),Object(i.jsx)(h.a,{label:"Platos",value:"Platos",icon:Object(i.jsx)(m.a,{})}),Object(i.jsx)(h.a,{label:"Ensaladas",value:"Ensaladas",icon:Object(i.jsx)(x.a,{})}),Object(i.jsx)(h.a,{label:"Refrescos",value:"Refrescos",icon:Object(i.jsx)(D.a,{})}),Object(i.jsx)(h.a,{label:"Cafeteria",value:"Cafeteria",icon:Object(i.jsx)($.a,{})}),Object(i.jsx)(h.a,{label:"Postres",value:"Postres",icon:Object(i.jsx)(v.a,{})})]})},k=t(196),C=t.n(k),T=t(203),P=t(197),R=t(146),M=t(174),S=t(59),z=t(22),E=t(175),A=t(194),N=t(14),F=Object(S.b)(null,(function(e){return{add:function(n){return e(Object(z.o)(n))}}}))((function(e){var n=e.dishes,t=e.add,r=Object(N.g)().order_id_param,o=Object(E.useMutation)(A.a),u=Object(d.a)(o,1)[0],l=function(){var e=Object(P.a)(C.a.mark((function e(n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({variables:{order_id:r,dish_id:n}}).then((function(e){var n=e.data.addDishToOrder.dishes,i=n[n.length-1];t(Object(T.a)(Object(T.a)({},i),{},{order_id:r}))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(i.jsx)(R.a,{style:{height:400,overflow:"auto"},children:Object(i.jsx)(c.a,{item:!0,md:12,children:n.map((function(e){return Object(i.jsx)(a.a,{m:3,border:0,borderRadius:10,boxShadow:3,children:Object(i.jsxs)(c.a,{container:!0,direction:"row",justify:"space-between",children:[Object(i.jsx)(a.a,{style:{width:"30%"},children:Object(i.jsx)(s.a,{children:e.name})}),Object(i.jsx)(a.a,{style:{width:50},children:Object(i.jsx)(s.a,{children:e.price})}),Object(i.jsx)(a.a,{children:Object(i.jsx)(M.a,{variant:"text",color:"primary",onClick:function(){return l(e._id)},children:"Agregar"})})]},e._id)})}))})})})),J=t(265),K=t(95),L=Object(o.a)((function(){return{test:{background:l.a[500]}}})),Q=function(){var e=Object(r.useState)("Rapidas"),n=Object(d.a)(e,2),t=n[0],o=n[1],u=Object(E.useQuery)(K.a),l=u.loading,j=(u.error,u.data),h=[];l||(h=j.dishes.filter((function(e){return e.category==="".concat(t)})));L();return Object(i.jsxs)(c.a,{container:!0,md:12,justify:"center",children:[Object(i.jsxs)(c.a,{item:!0,md:12,children:[Object(i.jsx)(a.a,{m:3,children:Object(i.jsxs)(c.a,{container:!0,direction:"row",alignItems:"center",justify:"space-between",children:[Object(i.jsx)(s.a,{children:"Menu "}),Object(i.jsx)(s.a,{children:t})]})}),Object(i.jsx)(J.a,{}),!l&&Object(i.jsx)(F,{dishes:h})]}),Object(i.jsx)(c.a,{item:!0,md:12,children:Object(i.jsx)(a.a,{border:0,m:2,align:"center",children:Object(i.jsx)(I,{setCategory:o,category:t})})})]})},q=t(241),H=t(172),B=t(235),G=t.n(B),U=t(237),V=t.n(U),W=t(236),X=t.n(W),Y=t(233),Z=t.n(Y),ee=t(229),ne=t(234),te=t(232),ie=t(228),re=t(230),ce=t(231),ae=t(206),de=t.n(ae),se=t(227),oe=t.n(se),ue=Object(o.a)((function(e){return{button:{margin:e.spacing(1)}}})),le=function(e){var n=e.sendKitchen,t=e.bill,r=e.desability_send_kitchen,d=e.desability_bill,s=ue();return Object(i.jsxs)(c.a,{container:!0,md:12,children:[Object(i.jsx)(c.a,{item:!0,spacing:1,md:6,children:Object(i.jsx)(a.a,{border:0,m:2,align:"center",children:Object(i.jsx)(M.a,{variant:"outlined",size:"small",color:"primary",className:s.button,disabled:d,onClick:function(){t()},startIcon:Object(i.jsx)(oe.a,{}),children:"Facturar"})})}),Object(i.jsx)(c.a,{item:!0,spacing:1,md:6,children:Object(i.jsx)(a.a,{border:0,m:2,align:"center",children:Object(i.jsx)(M.a,{variant:"outlined",size:"small",color:"secondary",className:s.button,disabled:r,onClick:function(){n()},startIcon:Object(i.jsx)(de.a,{}),children:"Ordenar"})})})]})},je=t(66),he=Object(S.b)((function(e){return{orders:e.order.orders}}),(function(e){return{remove:function(n){return e(Object(z.z)(n))},inc:function(n){return e(Object(z.x)(n))},dec:function(n){return e(Object(z.u)(n))},removeOrder:function(n){return e(Object(z.A)(n))},resetTable:function(n){return e(Object(je.f)(n))},dishesPreparing:function(n){return e(Object(z.v)(n))},changeDishDelivered:function(n){return e(Object(z.r)(n))},changeDishReady:function(n){return e(Object(z.t)(n))},billOrder:function(n){return e(Object(z.q)(n))}}}))((function(e){var n,t=e.orders,s=e.remove,o=e.inc,u=e.dec,l=e.removeOrder,j=e.resetTable,h=e.dishesPreparing,b=e.changeDishDelivered,O=e.changeDishReady,f=e.billOrder,m=Object(N.f)(),_=Object(N.g)().order_id_param,x=t.filter((function(e){return e._id===_}))[0],p=Object(r.useState)(!0),v=Object(d.a)(p,2),g=v[0],D=v[1],y=Object(r.useState)(!0),$=Object(d.a)(y,2),w=$[0],I=$[1];Object(r.useEffect)((function(){if(void 0===x.dishes)I(!0);else if(x.dishes.length>=0){var e=x.dishes.filter((function(e){return"pending"===e.state}));I(!e.length>0)}else I(!0)}),[t]),Object(r.useEffect)((function(){if(void 0===x.dishes)D(!0);else if(x.dishes.length>=0){var e=x.dishes.filter((function(e){return"delivered"===e.state})),n=x.dishes.length===e.length,t=x.dishes.length>0&&n;D(!t)}else D(!0)}),[t]);var k=Object(E.useMutation)(A.k),M=Object(d.a)(k,1)[0],S=function(){var e=Object(P.a)(C.a.mark((function e(n,t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M({variables:{order_id:t,dish_id:n._id}}).then((function(e){e.data.popDishToOrder.dishes;s(Object(T.a)(Object(T.a)({},n),{},{order_id:t}))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),z=Object(E.useMutation)(A.i),F=Object(d.a)(z,1)[0],J=function(){var e=Object(P.a)(C.a.mark((function e(n,t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({variables:{order_id:t,dish_id:n._id}}).then((function(e){e.data.incrementDishToOrder.dishes;o(Object(T.a)(Object(T.a)({},n),{},{order_id:t}))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),K=Object(E.useMutation)(A.d),L=Object(d.a)(K,1)[0],Q=function(){var e=Object(P.a)(C.a.mark((function e(n,t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L({variables:{order_id:t,dish_id:n._id}}).then((function(e){e.data.decrementDishToOrder.dishes;u(Object(T.a)(Object(T.a)({},n),{},{order_id:t}))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),B=Object(E.useMutation)(A.l),U=Object(d.a)(B,1)[0],W=function(){var e=Object(P.a)(C.a.mark((function e(n,t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({variables:{order_id:n}}).then((function(e){m.push("/floor"),l(n),j(t)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Y=Object(E.useMutation)(A.e),ae=Object(d.a)(Y,1)[0],de=function(){var e=Object(P.a)(C.a.mark((function e(){var n,t,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x._id,t=x.dishes.filter((function(e){return"pending"===e.state})),i=[],t.map((function(e){return i.push(e._id)})),h({dishes:i,order_id:n}),e.next=7,ae({variables:{order_id:n,dishes:i}}).then((function(e){e.data.dishPreparingToOrder.dishes})).catch((function(e){console.log(e)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=Object(E.useMutation)(A.f),oe=Object(d.a)(se,1)[0],ue=Object(E.useMutation)(A.h),je=Object(d.a)(ue,1)[0],he=function(){var e=Object(P.a)(C.a.mark((function e(n,t){var i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t._id,"ready"!==t.state){e.next=7;break}return b({order_id:n,dish_id:i}),e.next=5,oe({variables:{order_id:n,dish_id:i}}).then((function(e){e.data.dishDelivered.order})).catch((function(e){console.log(e)}));case 5:e.next=10;break;case 7:return O({order_id:n,dish_id:i}),e.next=10,je({variables:{order_id:n,dish_id:i}}).then((function(e){e.data.dishReady.order})).catch((function(e){console.log(e)}));case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),be=Object(E.useMutation)(A.b),Oe=Object(d.a)(be,1)[0],fe=function(){var e=Object(P.a)(C.a.mark((function e(){var n,t,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=x.dishes.length,t=x.dishes.filter((function(e){return"delivered"===e.state})).length,!(n===t&&n>0)){e.next=11;break}return i=x._id,f(i),j(x.table),m.push("/"),e.next=9,Oe({variables:{order_id:i}}).then((function(e){})).catch((function(e){console.log(e)}));case 9:e.next=12;break;case 11:alert("Aun no se puede facturar");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsx)("div",{children:Object(i.jsxs)(c.a,{container:!0,spacing:0,justify:"center",children:[Object(i.jsx)(c.a,{item:!0,md:12,children:Object(i.jsx)(ie.a,{children:Object(i.jsxs)(ee.a,{"aria-label":"simple table",children:[Object(i.jsx)(re.a,{children:Object(i.jsxs)(ce.a,{children:[Object(i.jsxs)(te.a,{children:["Comanda ",null===x||void 0===x?void 0:x.number]}),Object(i.jsxs)(te.a,{children:["Mesa: ",null===x||void 0===x?void 0:x.table," "]}),Object(i.jsxs)(te.a,{children:["Fecha: ",null===x||void 0===x?void 0:x.date]}),Object(i.jsxs)(te.a,{children:["Hora: ",null===x||void 0===x?void 0:x.time," "]}),Object(i.jsxs)(te.a,{children:[Object(i.jsx)(H.a,{"aria-label":"RemoveCircleOutlineIcon",children:Object(i.jsx)(Z.a,{fontSize:"small",onClick:function(){W(x._id,x.table)}})})," "]})]})}),Object(i.jsx)(ne.a,{})]})})}),Object(i.jsx)(R.a,{style:{height:400,width:"95%",overflow:"auto"},children:Object(i.jsx)(c.a,{item:!0,md:12,children:Object(i.jsx)(a.a,{m:2,mb:3,children:Object(i.jsx)(ie.a,{children:Object(i.jsxs)(ee.a,{"aria-label":"simple table",children:[Object(i.jsx)(re.a,{children:Object(i.jsxs)(ce.a,{children:[Object(i.jsx)(te.a,{children:"Eliminar"}),Object(i.jsx)(te.a,{children:"Item"}),Object(i.jsx)(te.a,{align:"center",children:"Quitar"}),Object(i.jsx)(te.a,{align:"center",children:"Cantidad"}),Object(i.jsx)(te.a,{children:"Acci\xf3n"}),Object(i.jsx)(te.a,{children:"Estado"})]})}),Object(i.jsx)(ne.a,{children:null===(n=x.dishes)||void 0===n?void 0:n.map((function(e){return Object(i.jsxs)(ce.a,{children:[Object(i.jsx)(te.a,{component:"th",scope:"row",children:Object(i.jsx)(H.a,{"aria-label":"delete",onClick:function(){return S(e,x._id)},children:Object(i.jsx)(G.a,{fontSize:"small"})})}),Object(i.jsx)(te.a,{component:"th",scope:"row",children:e.name}),Object(i.jsx)(te.a,{component:"th",scope:"row",align:"center",children:"pending"===e.state&&e.count>1&&Object(i.jsx)(H.a,{"aria-label":"RemoveCircleOutlineIcon",onClick:function(){return Q(e,x._id)},children:Object(i.jsx)(X.a,{fontSize:"small"})})}),Object(i.jsx)(te.a,{component:"th",scope:"row",align:"center",children:e.count}),Object(i.jsxs)(te.a,{component:"th",scope:"row",children:["pending"===e.state&&Object(i.jsx)(H.a,{"aria-label":"AddCircleOutlineIcon",onClick:function(){return J(e,x._id)},children:Object(i.jsx)(V.a,{fontSize:"small"})}),"ready"===e.state&&Object(i.jsx)(q.a,{checked:!1,onChange:function(){he(x._id,e)},color:"primary"}),"delivered"===e.state&&Object(i.jsx)(q.a,{checked:!0,onChange:function(){he(x._id,e)},color:"primary"})]}),Object(i.jsxs)(te.a,{component:"th",scope:"row",children:["pending"===e.state&&"Pendiente","preparing"===e.state&&"Preparando","ready"===e.state&&"Listo","delivered"===e.state&&"En mesa"]})]},1)}))})]})})})})}),Object(i.jsx)(le,{sendKitchen:de,bill:fe,desability_send_kitchen:w,desability_bill:g})]})})}));function be(){return Object(i.jsxs)(c.a,{container:!0,spacing:1,justify:"center",children:[Object(i.jsx)(c.a,{item:!0,md:6,children:Object(i.jsx)(a.a,{border:1,m:3,align:"center",children:Object(i.jsx)(Q,{})})}),Object(i.jsx)(c.a,{item:!0,md:6,children:Object(i.jsx)(a.a,{border:1,m:3,align:"center",children:Object(i.jsx)(he,{})})})]})}}}]);
//# sourceMappingURL=9.e24d0a39.chunk.js.map